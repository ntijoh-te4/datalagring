<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Datalagring</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Datalagring</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduktion">1. Introduktion</a>
<ul class="sectlevel2">
<li><a href="#_introduktion_till_databaser">1.1. Introduktion till databaser</a>
<ul class="sectlevel3">
<li><a href="#_vad_är_en_databas">1.1.1. Vad är en databas?</a></li>
<li><a href="#_typer_av_databashanteringsystem">1.1.2. Typer av databashanteringsystem</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_relationsdatabaser">2. Relationsdatabaser</a>
<ul class="sectlevel2">
<li><a href="#_introduktion_till_relationsdatabaser">2.1. Introduktion till Relationsdatabaser</a>
<ul class="sectlevel3">
<li><a href="#_fördelar_med_relationsdatabaser">2.1.1. Fördelar med relationsdatabaser</a></li>
<li><a href="#_nackdelar_med_relationsdatabaser">2.1.2. Nackdelar med Relationsdatabaser</a></li>
</ul>
</li>
<li><a href="#_tabeller_och_relationer">2.2. Tabeller och relationer</a>
<ul class="sectlevel3">
<li><a href="#_tupler">2.2.1. Tupler</a></li>
<li><a href="#_attribut">2.2.2. Attribut</a></li>
<li><a href="#_primärnyckel">2.2.3. Primärnyckel</a></li>
<li><a href="#_relationer">2.2.4. Relationer</a></li>
</ul>
</li>
<li><a href="#_normalisering">2.3. Normalisering</a>
<ul class="sectlevel3">
<li><a href="#_exempel">2.3.1. Exempel</a></li>
<li><a href="#_termer_och_begrepp">2.3.2. Termer och Begrepp</a></li>
<li><a href="#_normalformerna">2.3.3. Normalformerna</a></li>
</ul>
</li>
<li><a href="#_er_modellering">2.4. ER-Modellering</a>
<ul class="sectlevel3">
<li><a href="#_entitet">2.4.1. Entitet</a></li>
<li><a href="#_attribut_2">2.4.2. Attribut</a></li>
<li><a href="#_sambandstyp">2.4.3. Sambandstyp</a></li>
<li><a href="#_övningar">2.4.4. Övningar</a></li>
</ul>
</li>
<li><a href="#_transaktioner">2.5. Transaktioner</a>
<ul class="sectlevel3">
<li><a href="#_acid">2.5.1. ACID</a></li>
<li><a href="#_rollback">2.5.2. Rollback</a></li>
<li><a href="#_backup_och_snapshots">2.5.3. Backup och Snapshots</a></li>
</ul>
</li>
<li><a href="#_indexering">2.6. Indexering</a>
<ul class="sectlevel3">
<li><a href="#_varför_indexering">2.6.1. Varför Indexering</a></li>
<li><a href="#_nackdelar">2.6.2. Nackdelar</a></li>
</ul>
</li>
<li><a href="#_stored_procedures">2.7. Stored Procedures</a>
<ul class="sectlevel3">
<li><a href="#_fördelar">2.7.1. Fördelar</a></li>
<li><a href="#_nackdelar_2">2.7.2. Nackdelar</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_nosql_datagbaser">3. NoSQL-datagbaser</a>
<ul class="sectlevel2">
<li><a href="#_fördelar_med_nosql_databashanterare">3.1. Fördelar med NoSQL-databashanterare</a>
<ul class="sectlevel3">
<li><a href="#_big_data_2">3.1.1. Big Data</a></li>
<li><a href="#_schemaless">3.1.2. Schemaless</a></li>
<li><a href="#_scaling">3.1.3. Scaling</a></li>
</ul>
</li>
<li><a href="#_nackdelar_med_nosql_databaser">3.2. Nackdelar med NoSQL-databaser</a>
<ul class="sectlevel3">
<li><a href="#_avsaknad_av_acid">3.2.1. Avsaknad av ACID</a></li>
<li><a href="#_avsaknad_av_mogenhet">3.2.2. Avsaknad av mogenhet</a></li>
<li><a href="#_avsaknad_av_verktyg">3.2.3. Avsaknad av verktyg</a></li>
<li><a href="#_avsaknad_av_en_gemensam_standard">3.2.4. Avsaknad av en gemensam standard</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduktion">1. Introduktion</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduktion_till_databaser">1.1. Introduktion till databaser</h3>
<div class="sect3">
<h4 id="_vad_är_en_databas">1.1.1. Vad är en databas?</h4>
<div class="paragraph">
<p>En databas är en välorganiserad, det vill säga uppbyggd enligt nedskrivna regler, centraliserad, samling av data.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title"><strong>Data</strong> vs <strong>information</strong>.</div>
<div class="paragraph">
<p>Information är behandlad data - det vill säga data som någon kan använda för att tillföra något slags värde i någon slags process eller sammanhang.</p>
</div>
<div class="paragraph">
<p>Man kan säga att data blir information när någon tittar på eller behandlar den.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_typer_av_databashanteringsystem">1.1.2. Typer av databashanteringsystem</h4>
<div class="paragraph">
<p>En Databashanterare/Databashanteringssystem, eller DBMS (Database Management System), är mjukvara som gör det möjligt att på ett effektivt och säkert sätt definera och modifiera innehåll i en databas.</p>
</div>
<div class="paragraph">
<p>Man kan inte kommunicera direkt med en databas; all kommunikation sker via databashanteraren.</p>
</div>
<div class="paragraph">
<p>Det finns i dag två huvudsakliga typer av databaser: Relationsdatabaser och dokument/nod-baserade. Andra ord som används för att skilja på dessa två typer av databaser är SQL (relationella) och NoSQL (dokument/nod-baserade).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_relationsdatabaser">2. Relationsdatabaser</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduktion_till_relationsdatabaser">2.1. Introduktion till Relationsdatabaser</h3>
<div class="paragraph">
<p>Relationsdatabaser bygger på <a href="https://en.wikipedia.org/wiki/Relational_algebra">relationsalgebra</a>. Som tur är behöver man inte förstå all bakomliggande teori för att kommunicera med en databashanterare.</p>
</div>
<div class="paragraph">
<p>Det finns flera olika databashanterare för relationsdatabaser, t.ex</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.sqlite.org/">SQLite</a></p>
</li>
<li>
<p><a href="https://www.mysql.com/">MySQL</a></p>
</li>
<li>
<p><a href="https://mariadb.org/">MariaDB</a></p>
</li>
<li>
<p><a href="https://www.postgresql.org/">PostgreSQL</a></p>
</li>
<li>
<p><a href="https://www.oracle.com/database/index.html">Oracle Database</a></p>
</li>
<li>
<p><a href="https://www.microsoft.com/en-us/sql-server/sql-server-2016">Microsoft SQL Server</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Relationsdatabaser lagrar all data i <em>tabeller</em>, och dessa tabeller har kopplingar, eller <em>relationer</em> till varandra.</p>
</div>
<div class="sect3">
<h4 id="_fördelar_med_relationsdatabaser">2.1.1. Fördelar med relationsdatabaser</h4>
<div class="sect4">
<h5 id="_garanterad_data_konsistens">Garanterad data-konsistens</h5>
<div class="paragraph">
<p>Relationsdatabaser har olika metoder (se ACID) för att garantera att datan i databasen, vid varje tillfälle, kommer vara korrekt formaterad.</p>
</div>
</div>
<div class="sect4">
<h5 id="_garanterad_data_integritet">Garanterad data-integritet</h5>
<div class="paragraph">
<p>Relationsdatabaser har olika metoder (se ACID) för att garanter att databasen kommer innehålla korrekt data.</p>
</div>
</div>
<div class="sect4">
<h5 id="_normalisering_av_data">Normalisering av data</h5>
<div class="paragraph">
<p>Normalisering, eller normaliserad data innebär att man minskar förekomsten av redundant data.</p>
</div>
<div class="paragraph">
<p>Normalisering låter oss</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Minska det utrymme databasen behöver</p>
</li>
<li>
<p>Minska risken att vi har <em>inkonsistent</em> data, det vill säga att beroende på var man i databasen kollar, skulle kunna få olika svar</p>
</li>
<li>
<p>Öka prestandan</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_validering_av_data">Validering av data</h5>
<div class="paragraph">
<p>I de flesta databashanterare kan man skriva regler för hur rader och kolumner i tabeller ska se ut.</p>
</div>
<div class="paragraph">
<p>T.ex kan man bestämma att alla rader i användartabellen måste innehålla ett användarnamn, och att varje användarnamn måste vara unikt.
Databashanteraren gör det i så fall omöjligt att skapa rader i användatabellen som saknar användarnamn, eller där användarnamnet redan finns på någon annan rad i tabellen.</p>
</div>
</div>
<div class="sect4">
<h5 id="_en_bebrövad_standard">En bebrövad standard</h5>
<div class="paragraph">
<p>SQL är ett väldokumenterat språk som väldigt många utvecklare behärskar. Det är därför lätt för nya utvecklare att sätta sig in i ett nytt system.</p>
</div>
</div>
<div class="sect4">
<h5 id="_säkerhet_och_integritet">Säkerhet och integritet</h5>
<div class="paragraph">
<p>De flesta databashanterare innehåller avancerade kontroller av vem som har rättighet att utföra olika operationer i databasen.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_nackdelar_med_relationsdatabaser">2.1.2. Nackdelar med Relationsdatabaser</h4>
<div class="sect4">
<h5 id="_osäkerhet_kring_lämplig_datastruktur">Osäkerhet kring lämplig datastruktur</h5>
<div class="paragraph">
<p>Om man är osäker på hur man ska strukturera sin data kan det vara svårt att få till effektiva datastrukturer i en relationsdatabas.</p>
</div>
</div>
<div class="sect4">
<h5 id="_föränderliga_datastrukturer">Föränderliga datastrukturer</h5>
<div class="paragraph">
<p>Om ens data och datastrukturer ofta förändras kan en relationsdatabas vara olämplig då det är bökigt att ändra om strukturen i en relationsdatabas och fortfarande uppfylla alla regler och garantier.</p>
</div>
</div>
<div class="sect4">
<h5 id="_big_data">Big Data</h5>
<div class="paragraph">
<p>När man har stora (riktigt stora) mängder data - så kallad Big Data - kan alla regler och garantier en relationsdatabas har sänka prestandan.</p>
</div>
</div>
<div class="sect4">
<h5 id="_kontinuerliga_dataströmmar">Kontinuerliga dataströmmar</h5>
<div class="paragraph">
<p>Även i de fall där man kontinuerligt har en stor ström med ny inkommande data, kan alla regler och kontroller kan göra att prestandan blir lidande.</p>
</div>
</div>
<div class="sect4">
<h5 id="_decentralisering">Decentralisering</h5>
<div class="paragraph">
<p>Det kan även vara komplicerat att dela upp databasen på olika servrar, t.ex. genom så kallad "sharding".</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tabeller_och_relationer">2.2. Tabeller och relationer</h3>
<div class="paragraph">
<p>En relationsdatabas består av en eller flera <code>tabeller</code>. Varje tabell har ett namn, och består av <code>rader</code> och <code>kolumner</code>.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<caption class="title">Table 1. Exempel på en tabell för att hålla koll på böcker</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 60%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>books</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>page_count</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Catch 22'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">464</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'To Kill a Mockingbird'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">336</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'1984'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">328</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Stranger'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">123</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Tabellen ovan har namnet <code>books</code>, och har 4 rader och 3 kolumner.</p>
</div>
<div class="sect3">
<h4 id="_tupler">2.2.1. Tupler</h4>
<div class="paragraph">
<p>Varje rad i tabellen kallas för en <code>tupel</code> och beskriver en <code>post</code> i tabellen. I vårt exempel lagrar varje tupel information om en bok.</p>
</div>
</div>
<div class="sect3">
<h4 id="_attribut">2.2.2. Attribut</h4>
<div class="paragraph">
<p>Varje kolumn beskriver en egenskap, eller <code>attribut</code> för posten. I vårt fall är "id", "title" och "page_count" attribut.</p>
</div>
<div class="paragraph">
<p>Attribut måste vara <code>atomära</code>, det vill säga i varje "cell" eller "fält" får det maximalt finnas ett värde - man kan t.ex inte lagra flera titlar i en och samma cell.</p>
</div>
</div>
<div class="sect3">
<h4 id="_primärnyckel">2.2.3. Primärnyckel</h4>
<div class="paragraph">
<p>Varje rad i en tabell måste vara unik, det vill säga, i varje tabell får det inte förekomma två rader där samtliga kolumner är identiska (detta är en följd av relationsalgebran).</p>
</div>
<div class="paragraph">
<p>Detta löses genom att varje tabell har en attribut som kallas för <code>primärnyckel</code> eller <code>primary key</code>. I tabellen ovan är det attributet med namnet <code>id</code> som är primärnyckel</p>
</div>
<div class="paragraph">
<p>När man skapar tabellen talar man om vilken av attributen som kommer vara primärnyckeln.</p>
</div>
<div class="paragraph">
<p>Detta innebär att om någon annan skulle skriva en bok som heter the stranger, och som råkar ha 123 sidor även den kommer raden fortfarande vara unik, eftersom den kommer få en unikt värde på primärnyckeln</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<caption class="title">Table 2. Varje tupel är fortfarande unik, trots att det finns två böcker med samma titel och sidantal.</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 60%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>books</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>page_count</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Catch 22'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">464</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'To Kill a Mockingbird'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">336</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'1984'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">328</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Stranger'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">123</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Stranger'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">123</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Det är databashanterarens roll att kontrollera att varje tupel är unik.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Namngivning av primärnyckeln</div>
<div class="paragraph">
<p>I den här boken kommer vi:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>alltid</strong> använda namnet <strong>id</strong> för primärnyckeln, men primärnyckeln <em>kan</em> heta vad som helst.</p>
</li>
<li>
<p><strong>alltid</strong> använda <strong>automatiskt inkrementerande heltal</strong> för primärnyckeln, men primärnyckeln <em>kan</em> vara vad som helst.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_relationer">2.2.4. Relationer</h4>
<div class="paragraph">
<p>För att knyta samman två tabeller behöver vi skapa en <code>relation</code>, det vill säga, en koppling, mellan dem.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 40%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 60%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>books</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>page_count</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Catch 22'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">464</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'To Kill a Mockingbird'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">336</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'1984'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">328</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Stranger'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">123</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Closing Time'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">382</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Animal Farm'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">218</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Plague  '</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">312</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Coming Up for Air'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">393</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 22.2222%;">
<col style="width: 22.2222%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="5"><p class="tableblock"><strong>authors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>nationality</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>birth_year</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>shoe_size</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Joseph Heller'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'American'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1923</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">42</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Harper Lee'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'American'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1926</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">36</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'George Orwell'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'English'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1903</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">41</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Albert Camus'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'French'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1913</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">44</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>I exemplet med böcker och författare behöver vi skapa en <code>en-till-många-relation</code> mellan authors och books - <em>en</em> för fattare kan ha skrivit <em>många</em> böcker (men en bok kan bara ha en författare).</p>
</div>
<div class="sect4">
<h5 id="_främmande_nyckel">Främmande nyckel</h5>
<div class="paragraph">
<p>För att skapa en relation mellan två tabeller använder man en <code>främmande nyckel</code>. Man skapar en främmande nyckel genom att kopiera in värdet från  <code>primärnyckeln</code> i <code>en-änden</code> av relationen i en ny kolumn i <code>många-änden</code> av relationen.</p>
</div>
<div class="paragraph">
<p>I vårt fall innebär det att vi ska lägga till primärnyckeln från <strong>author</strong>-tabellen i <strong>books</strong>-tabellen (en för fattare kan ha skrivit flera böcker).</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 40%;">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 37.5%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>books</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>page_count</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>author_id</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Catch 22'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">464</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'To Kill a Mockingbird'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">336</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'1984'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">328</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Stranger'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Closing Time'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">382</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Animal Farm'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">218</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Plague  '</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">312</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Coming Up for Air'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">393</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Namngivning av den främmande nyckeln</div>
<div class="paragraph">
<p>Den främmande nyckelns kolumn kan heta precis vad som helst, men i den här boken kommer den främmande nyckelns kolumn-namn <strong>alltid</strong> döpas enligt följande: <strong>namnet på en-ändens tabellnamn <em>i singular</em></strong> följt av ett understreck och sen <strong>id</strong> (<strong>author_id</strong>)</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_normalisering">2.3. Normalisering</h3>
<div class="paragraph">
<p>Normalisering av relationsdatabaser är en teori för hur man får en effektiv struktur på sin databas.</p>
</div>
<div class="paragraph">
<p>Genom att följa en given metodik kan man</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Minska redundans</p>
</li>
<li>
<p>Minska risken för oönskade bieffekter (data-anomalier)</p>
</li>
<li>
<p>Öka prestandan i databasen</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_exempel">2.3.1. Exempel</h4>
<div class="paragraph">
<p>Vi återanvänder bok-exemplet från föregående avsnitt:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 40%;">
<caption class="title">Table 3. Exempel på en tabell för att hålla koll på böcker</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 60%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>books</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>page_count</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Catch 22'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">464</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'To Kill a Mockingbird'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">336</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'1984'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">328</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Stranger'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">123</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Säg att vi vill även vill lagra författarens namn. Vi lägger därför till en kolumn:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
<col style="width: 37.5%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>books</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>page_count</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>author</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Catch 22'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">464</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Joseph Heller'</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'To Kill a Mockingbird'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">336</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Harper Lee'</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'1984'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">328</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'George Orwell''</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Stranger'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Albert Camus'</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Inga problem, men säg att vi även vill lagra författarens nationalitet, födelseår och skostorlek.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 70%;">
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 25%;">
<col style="width: 8.3333%;">
<col style="width: 25%;">
<col style="width: 16.6666%;">
<col style="width: 8.3333%;">
<col style="width: 8.3335%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="7"><p class="tableblock"><strong>books</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>page_count</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>author</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>nationality</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>birth_year</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>shoe_size</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Catch 22'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">464</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Joseph Heller'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'American'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1923</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">42</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'To Kill a Mockingbird'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">336</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Harper Lee'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'American'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1926</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">36</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'1984'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">328</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'George Orwell'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'English'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1903</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">41</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Stranger'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Albert Camus'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'French'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1913</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">44</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Nu börjar tabellen se lite konstig ut: Tabellen heter "books" men innehåller attributen "nationality", "birth_year" och "shoe_size". De låter inte som attribut (egenskaper) en bok har. Vi kan förstås lägga in "author_" framför varje attribut som är kopplat till en författare snarare än en bok:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 70%;">
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 25%;">
<col style="width: 8.3333%;">
<col style="width: 25%;">
<col style="width: 16.6666%;">
<col style="width: 8.3333%;">
<col style="width: 8.3335%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="7"><p class="tableblock"><strong>books</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>page_count</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>author</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>author_nationality</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>author_birth_year</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>author_shoe_size</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Catch 22'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">464</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Joseph Heller'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'American'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1923</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">42</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'To Kill a Mockingbird'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">336</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Harper Lee'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'American'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1926</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">36</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'1984'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">328</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'George Orwell'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'English'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1903</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">41</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Stranger'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Albert Camus'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'French'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1913</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">44</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Det känns bättre, men det är fortfarande konstigt att om man vill veta vilken skostorlek en författare har så ska man kolla i boktabellen. Men vad händer när vi börjar lagra flera böcker för en författare?</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 25%;">
<col style="width: 8.3333%;">
<col style="width: 25%;">
<col style="width: 16.6666%;">
<col style="width: 8.3333%;">
<col style="width: 8.3335%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="7"><p class="tableblock"><strong>books</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>page_count</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>author</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>author_nationality</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>author_birth_year</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>author_shoe_size</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Catch 22'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">464</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Joseph Heller'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'American'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1923</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">42</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'To Kill a Mockingbird'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">336</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Harper Lee'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'American'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1926</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">36</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'1984'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">328</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'George Orwell'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'English'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1903</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">41</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Stranger'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">123</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Albert Camus'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'French'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1913</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">44</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Closing Time'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">382</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Joseph Heller'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'American'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1923</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">42</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Animal Farm'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">218</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'George Orwell'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'English'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1903</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">41</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Plague  '</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">312</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Albert Camus'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'French'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1913</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">44</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Coming Up for Air'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">393</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'George Orwell'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'English'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1903</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">41</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Nu förekommer varje författares nationalitet, födelseår och skostorlek flera gånger - vi har med andra ord redundant data i databasen.</p>
</div>
<div class="paragraph">
<p>Vi vill i största möjliga utsträckning undvika redundant data, och behöver därför <code>normalisera</code> datan, genom att dela upp datan i <strong>två</strong> tabeller - <code>books</code> och <code>authors</code></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 33.3333%;">
<col style="width: 22.2222%;">
<col style="width: 22.2222%;">
<col style="width: 11.1112%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="5"><p class="tableblock"><strong>authors</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>nationality</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>birth_year</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>shoe_size</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Joseph Heller'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'American'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1923</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">42</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Harper Lee'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'American'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1926</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">36</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'George Orwell'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'English'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1903</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">41</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Albert Camus'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'French'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1913</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">44</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 60%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>books</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>page_count</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Catch 22'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">464</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'To Kill a Mockingbird'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">336</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'1984'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">328</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Stranger'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">123</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Closing Time'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">382</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Animal Farm'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">218</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'The Plague  '</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">312</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'Coming Up for Air'</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">393</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Nu har vi normaliserat datan; data om författare i en tabell, och data om böcker i en annan. Ingen data är duplicerad. Dessvärre vet vi inte längre vilken författare som skrivit vilken bok.</p>
</div>
<div class="paragraph">
<p>För att hålla koll på vilken författare som skrivit vilken bok behöver vi lägga till en <code>främmande nyckel</code> i books-tabellen:</p>
</div>
<div class="paragraph">
<p>Normalisering leder vanligtvis till att tabeller delas upp och struktureras om. Tabeller kan uppfylla olika normalformer, beroende på hur långt normaliseringen drivs. De vanligaste normalformerna är första normalformen (1NF), andra normalformen (2NF) och tredje normalformen 3NF.</p>
</div>
<div class="paragraph">
<p>Om man följer stegen ovan kommer man rätt långt i normaliseringsprocessen, och det är mycket möjligt att ens databas blir helt normaliserad. Det är dock fortfarande viktigt att förstå den bakomliggande teorin bakom normalisering av relationsdatabaser. De problem som ändå uppstår kan man ofta hantera om man följer den enkla grundregeln "en typ av sak per tabell, och en sån sak per rad".</p>
</div>
<div class="paragraph">
<p>Men man behöver ändå förstå de bakomliggande teorierna och begreppen; det är inte alltid så lätt att inse vad de där "sakerna" som man ska ha en per rad egentligen är.</p>
</div>
<div class="paragraph">
<p>Ibland kan man även behöva analysera en existerande eller föreslagen design, och då måste man förstå, och kunna förklara, vilka problem den medför. Kanske måste man göra en avvägning mellan de nackdelar en dåligt normaliserad design medför, och arbetet att göra om databasen.</p>
</div>
</div>
<div class="sect3">
<h4 id="_termer_och_begrepp">2.3.2. Termer och Begrepp</h4>
<div class="paragraph">
<p>För att kunna ta till sig och tillämpa teorin bakom normalformerna behöver man först lära sig och behärska ett par begrepp:</p>
</div>
<div class="sect4">
<h5 id="_tilläggsanomali">Tilläggsanomali</h5>
<div class="paragraph">
<p>En tilläggsanomali (insertion anomaly) innebär att man inte kan lägga till data i en rad i en tabell innan man har information nog att fylla alla celler i raden.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<caption class="title">Table 4. En tabell som visar på möjliga tilläggsanomalier</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>students</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>course_code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>course_name</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">engelska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">svenska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tyska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">beata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">beatavägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">engelska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">beata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">beatavägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tyska</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>I tabellen ovan går det inte (utan att införa null-värden) att</p>
</div>
<div class="ulist">
<ul>
<li>
<p>lägga till (insert) en kurs utan att det finns en elev inskriven i kursen.</p>
</li>
<li>
<p>skriva in en elev utan att också lägga till eleven i en kurs</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Detta är exempel på insertion anomalys. Insertion anomalys uppstår när man har "felaktiga" <em>funktionella beroenden</em> (se nedan) i tabellen.</p>
</div>
</div>
<div class="sect4">
<h5 id="_uppdateringsanomali">Uppdateringsanomali</h5>
<div class="paragraph">
<p>En uppdateringsanomali (update anomaly) kan uppstå när man upprepar samma information på olika ställen i databasen. Det finns då en risk att man missar att ändra datan på flera olika ställen.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<caption class="title">Table 5. En tabell som visar på en uppdateringsanomali</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>students</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>course_code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>course_name</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">engelska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">svenska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tyska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">beata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">beatavägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">engelska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">beata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">göstavägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tyska</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>I tabellen ovan har adressen för beata endast uppdaterats i en av raderna. Update anomalys kan uppstå när man har "felaktiga" <em>funktionella beroenden</em> (se nedan) i tabellen.</p>
</div>
</div>
<div class="sect4">
<h5 id="_borttagningsanomali">Borttagningsanomali</h5>
<div class="paragraph">
<p>En borttagningsanomali (deletion anomaly) innebär att man, när man tar bort en rad i en tabell, kan råka ta bort annan information som inte återkommer någon annanstans i databasern.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<caption class="title">Table 6. En tabell som visar på en möjlig borttagninsanomali</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>students</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>course_code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>course_name</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">engelska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">svenska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tyska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">beata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">beatavägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">engelska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">beata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">göstavägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tyska</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Om man i tabellen ovan tar bort all information om "adam" så kommer även <code>course_name</code> och <code>course_code</code> för "svenska" försvinna från databasen, eftersom ingen annan elev är inskriven i denna kurs. Deletion anomalys kan uppstå när man har "felaktiga" <em>funktionella beroenden</em> (se nedan) i tabellen.</p>
</div>
</div>
<div class="sect4">
<h5 id="_funktionellt_beroende">Funktionellt Beroende</h5>
<div class="paragraph">
<p>Ett funktionellt beroende (fb) är ett beroende mellan attribut i en tabell. Låt oss anta att vi har en tabell med personnummer och namn:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 40%;">
<caption class="title">Table 7. En tabell med ett funktionellt beroende mellan personnummer och namn</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>personer</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>personnummer</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>namn</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">970811-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">560222-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Viking Fors</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">590928-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alexis Lindroth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">820402-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>I tabellen ovan finns ett funktionellt beroende mellan <code>personnummer</code> och <code>namn</code>. Detta innebär att för ett givet personnummer kommer alltid samma namn returneras, men det omvända är inte sant - ett namn kommer inte garanterat returnera samma personnummer. Med andra ord: om samma personnummer skulle förekomma på två rader i tabellen, så måste värdena namnen också vara lika.</p>
</div>
<div class="paragraph">
<p>Detta funktionella beroende kan beskrivas som <code>personnummer &#8594; namn</code> vilket utläses som "personnumer <em>bestämmer</em> namn" I det här exemplet är <code>personnummer</code> <em>determinanten</em>, eftersom den bestämmer eller <em>determinerar</em> namnet.</p>
</div>
<div class="paragraph">
<p>Generaliserat brukar man skriva ut funktionella betenden som <code>A &#8594; B</code></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<caption class="title">Table 8. En tabell med <em>flera</em> funktionella beroenden</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>students</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>course_code</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>course_name</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">engelska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">svenska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adamvägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tyska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">beata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">beatavägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">engelska</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">beata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">beatavägen 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tyska</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>I tabellen <code>students</code> ovan finns två olika, av varandra oberoende, funktionella beroenden:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name &#8594; address</code></p>
</li>
<li>
<p><code>course_code &#8594; course_name</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ett funktionellt beroende kan innehålla flera determinanter, det vill säga ett <em>flera</em> attribut kan <em>tillsammans</em> bestämma värdet på ett (eller flera) andra attribut.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 70%;">
<caption class="title">Table 9. En tabell med funktionella beroenden med flera determinanter</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 25%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 16.6666%;">
<col style="width: 8.3336%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="7"><p class="tableblock"><strong>songs</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>artist_name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>album</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>year</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>length</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>genre</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TiK ToK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kesha</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tik Tok</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tiktok.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alors on danse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DJ Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hits Dance Club</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alors.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alors on danse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DJ Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hits Dance Club</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alors.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hot N Cold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Katy Perry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hot N Cold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2008</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:43</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hotncold.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">My Hero</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myhero.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">My Hero</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myhero.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rock</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">everlong.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">everlong.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rock</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xandra</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xeverlong.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Förutsatt att ingen artist får ge ut en låt med samma titel i olika album finns i <code>songs</code>-tabellen ovan (bland annat) följande funktionella beroenden:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{title, artist_name, album, year, length, genre} &#8594; path</code></p>
</li>
<li>
<p><code>{title, artist_name, album, year, length} &#8594; path</code></p>
</li>
<li>
<p><code>{title, artist_name, album, year} &#8594; path</code></p>
</li>
<li>
<p><code>{title, artist_name, album} &#8594; path</code></p>
</li>
<li>
<p><code>{title, artist_name} &#8594; path</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Vilka andra funktionella beroenden kan du hitta?</p>
</div>
</div>
<div class="sect4">
<h5 id="_fullt_funktionellt_beroende">Fullt Funktionellt Beroende</h5>
<div class="paragraph">
<p>Ett fullt eller fullständigt funktionellt beronde (ffb) är ett funktionellt beroende där man inte kan ta bort någon av determinanterna utan att det funktionella beroendet upphör att gälla. Detta innebär att alla funktionella beroenden som enbart har <em>en</em> determinant är fullständiga beroenden.</p>
</div>
<div class="paragraph">
<p>Fullt funktionella beroenden skrivs ut som <code>A &#8658; B</code></p>
</div>
<div class="paragraph">
<p>I <code>songs</code>-tabellen ovan är <code>{title, artist_name} &#8658; path</code> ett fullt funktionellt beroende, eftersom man inte kan ta bort varesig <code>title</code> eller <code>artist_name</code> utan att det funktionella beroendet försvinner.</p>
</div>
<div class="paragraph">
<p>Vilka ffb skulle kunna finnas i tabellen nedan?</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<caption class="title">Table 10. En konstig tabell med funktionella beroenden</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>strange_table</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>A</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>B</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>C</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>D</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_transitivt_beroende">Transitivt Beroende</h5>
<div class="paragraph">
<p>Om <code>a &#8594; b</code> och dessutom <code>b &#8594; c</code> så är c transitivt beroende av a via b (förutsatt att b eller c inte bestämmer a)</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<caption class="title">Table 11. En tabell med transitionella beroenden</caption>
<colgroup>
<col style="width: 6.6666%;">
<col style="width: 20%;">
<col style="width: 13.3333%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20.0001%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="6"><p class="tableblock"><strong>employees</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>position</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_phone</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Johan Bengtsson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Johanneberg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origovägen 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">031-741 21 00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anna Persson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Johanneberg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origovägen 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">031-741 21 00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fatima Alzanbouri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Principal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Johanneberg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origovägen 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">031-741 21 00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inge Naning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Södertörn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Röntgenvägen 9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08-556 408 50</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minna Salo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Södertörn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Röntgenvägen 9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08-556 408 50</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Andrew Gao</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Principal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Södertörn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Röntgenvägen 9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08-556 408 50</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>I tabellen ovan gäller (bland annat) <code>id &#8594; school_name</code> men även <code>school_name &#8594; {school_address, school_phone}</code>
Detta innebär att <code>school_address</code> och <code>school_phone</code> är transitionellt beroende av <code>id</code> via <code>school_name</code></p>
</div>
</div>
<div class="sect4">
<h5 id="_supernyckel">Supernyckel</h5>
<div class="paragraph">
<p>En supernyckel (engelska: super key) består av ett eller flera attribut som <em>tillsammans</em> kan användas för att unikt identifiera en tupel i tabellen, det vill säga: Det kombinationen av värden bland de ingående attributen måste vara unika inom tabellen. I <code>songs</code>-tabellen ovan finns (bland annat) följande supernycklar:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>title</code>, <code>artist_name</code>, <code>album</code>, <code>year</code>, <code>length</code>, <code>genre</code></p>
</li>
<li>
<p><code>title</code>, <code>artist_name</code>, <code>album</code>, <code>year</code>, <code>length</code></p>
</li>
<li>
<p><code>title</code>, <code>artist_name</code>, <code>album</code>, <code>year</code></p>
</li>
<li>
<p><code>title</code>, <code>artist_name</code>, <code>album</code></p>
</li>
<li>
<p><code>title</code>, <code>artist_name</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_kandidatnycklar">Kandidatnycklar</h5>
<div class="paragraph">
<p>En kandidatnyckel är en supernyckel utan redundanta attribut, det vill säga den supernyckel där vi inte kan ta bort fler attribut utan att vi inte längre kan garantera att raden kommer vara unik. I <code>songs</code>-tabellen ovan skulle kandidatnyckeln bestå av <code>title</code> tillsammans med <code>artist_name</code></p>
</div>
</div>
<div class="sect4">
<h5 id="_primärnyckel_2">Primärnyckel</h5>
<div class="paragraph">
<p>En primärnyckel (engelska: primary key) är den av kandidatnycklarna (om det finns flera) designern av databasen har valt ut att använda för interaktion med en given tabell.</p>
</div>
</div>
<div class="sect4">
<h5 id="_icke_nyckel_attribut">Icke-nyckel-attribut</h5>
<div class="paragraph">
<p>Ett icke-nyckel-attribut (engelska: non-key attribute) är ett attribut som inte är ingår i <em>någon</em> av tabellens kandidatnycklar</p>
</div>
<div class="paragraph">
<p>I <code>songs</code>-tabellen är därmed följande attribut icke-primär-attribut: <code>album</code>, <code>year</code>, <code>length</code>, <code>path</code>, <code>genre</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_normalformerna">2.3.3. Normalformerna</h4>
<div class="sect4">
<h5 id="_första_normalformen_1nf">Första Normalformen (1NF)</h5>
<div class="paragraph">
<p>Regler för Första Normalformen (1NF)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Varje attribut i en tabell måste vara atomärt (dvs innehålla ett enda värde)</p>
</li>
<li>
<p>Varje tupel i en tabell måste vara unik, det vill säga det får i tabellen inte finnas två identiska rader.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Första normalformen är egentligen den enda normalform en relationsdatabas <em>måste</em> uppfylla för att fungera (men för att undvika uppdateringsanomalier (update anomalies) så är det rekommenderat att normalisera tom 3NF).</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 65%;">
<caption class="title">Table 12. En students-tabell som inte når upp till 1NF</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>students</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>personnr</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>namn</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>courses</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">010811-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EN7, SV3, MA4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">000222-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Viking Fors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EN7, MA4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">020928-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alexis Lindroth</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">020402-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EN5, MA2, KE1, PROG1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>I <code>students</code>-tabellen ovan innehåller <code>course</code>-attributet flera värden, det vill säga, det är inte atomärt.</p>
</div>
<div class="paragraph">
<p>Man skulle kunna lösa problemet med att lägga in fler kolumner för kurser, t.ex course1, course2, course3, etc. Detta skulle dock betyda att de elever som inte läser maximalt antalt kurser kommer ha en eller flera kolumn utan värde i.</p>
</div>
<div class="paragraph">
<p>Om man ska lägga in elever med fler kurser än vad man räknat med skulle vara maximalt antal kurser skulle det inte att gå. Det kommer också att uppstå problem med frågeställningen i tabellen:</p>
</div>
<div class="listingblock">
<div class="title">tänk följande fråga för att ta reda på om någon läser engelska 7</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">students</span>
<span class="k">WHERE</span> <span class="n">course1</span> <span class="o">=</span> <span class="s1">'EN7'</span> <span class="k">OR</span>
      <span class="n">course2</span> <span class="o">=</span> <span class="s1">'EN7'</span> <span class="k">OR</span>
      <span class="n">course3</span> <span class="o">=</span> <span class="s1">'EN7'</span> <span class="k">OR</span>
      <span class="n">course4</span> <span class="o">=</span> <span class="s1">'EN7'</span> <span class="k">OR</span>
      <span class="n">course5</span> <span class="o">=</span> <span class="s1">'EN7'</span> <span class="k">OR</span>
      <span class="p">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Man skulle även kunna lösa problemet genom att skapa en kolumn för varje kurs som finns, och som värde ha true/false/null baserat på om eleven läser kursen eller inte. Detta skulle innebära en väldig massa onödiga false eller nullvärden, och så fort en ny kurs läggs till eller tas bort skulle man behöva modifiera tabellen - en synnerligen dyr (tids- och resursmässigt) och otymplig operation.</p>
</div>
<div class="paragraph">
<p>En möjlig lösning som skulle uppfylla 1NF är att varje elev förekommer på flera rader:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<caption class="title">Table 13. En students-tabell som når upp till 1NF</caption>
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 42.8571%;">
<col style="width: 14.2858%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>students</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>personnr</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>namn</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>courses</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">010811-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EN7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">010811-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SV3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">010811-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MA4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">000222-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Viking Fors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EN7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">000222-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Viking Fors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MA4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">020928-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alexis Lindroth</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">020402-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EN5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">020402-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MA2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">020402-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KE1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">020402-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PROG1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Om man ser tillbaks till tilläggs/uppdaterings/borttagningsanomalierna kan man dock se att detta inte är en bra lösning.</p>
</div>
<div class="paragraph">
<p>Ett <em>bättre</em> alternativ är att uppfylla 1NF genom att dela upp tabellen i två olika tabeller:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 40%;">
<caption class="title">Table 14. en students-tabell som når upp till 1NF</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>students</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>personnr</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>namn</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">010811-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">000222-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Viking Fors</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">020928-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alexis Lindroth</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">020402-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Karl-Gustaf Sjöblom</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all" style="width: 40%;">
<caption class="title">Table 15. en courses-tabell som når upp till 1NF</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>courses</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>personnr</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>course</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">010811-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EN7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">010811-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SV3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">010811-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MA4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">000222-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EN7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">000222-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MA4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">020402-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EN5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">020402-xxxx</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MA2</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Även om denna uppdelning är bättre ger den inte ett bra skydd mot anomalier - hur lägger man t.ex. till en kurs som ingen student läser, eller vad händer när ingen student längre läser t.ex. "EN7"?</p>
</div>
<div class="paragraph">
<p>Ännu bättre hade antagligen varit att dela upp tabellen i <em>tre</em> tabeller varav en <em>relationstabell</em>, men det bryr sig inte 1NF om.</p>
</div>
<div class="sect5">
<h6 id="_övningsuppgift">Övningsuppgift</h6>
<div class="paragraph">
<p>Normalisera nedanstående tabell så den uppfyller 1NF.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 40%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>friends</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>phone_numbers</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">123, 234</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">345, 456</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Charles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">567, 678, 789</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_andra_normalformen_2nf">Andra Normalformen (2NF)</h5>
<div class="paragraph">
<p>Regler för Andra Normalformen (2NF)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Alla regler för 1NF är uppfyllda</p>
</li>
<li>
<p>Alla icke-nyckel-attribut är fullt funktionsberoende (ffb) av tabellens kandidat/primärnyckel</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tabeller som uppfyller 2NF har mindre redundans är tabeller i 1NF men de kan fortfarande lida av uppdateringsanomalier.</p>
</div>
<div class="paragraph">
<p>Eftersom alla funktionella beroenden där det finns en <em>ensam</em> determinant är <em>fullständiga</em> funktioneller beroenden, innebär det att alla tabeller som upfyller 1NF och har en primärnyckel bestående av enbart 1 attribut automatiskt uppfyller 2NF. Detta är även det enklaste sättet att garantera 2NF.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 70%;">
<caption class="title">Table 16. songs-tabellen</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 25%;">
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 16.6666%;">
<col style="width: 8.3336%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="7"><p class="tableblock"><strong>songs</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>artist_name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>album</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>year</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>length</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>genre</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TiK ToK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kesha</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tik Tok</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tiktok.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alors on danse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DJ Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hits Dance Club</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alors.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alors on danse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DJ Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hits Dance Club</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alors.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hot N Cold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Katy Perry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hot N Cold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2008</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:43</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hotncold.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">My Hero</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myhero.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">My Hero</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myhero.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rock</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">everlong.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">everlong.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rock</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xandra</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xeverlong.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>I <code>songs</code>-tabellen är <code>album</code>, <code>year</code>, <code>length</code> samt <code>path</code> icke-nyckel-attribut som har ett fullt funktionellt beroende av vår kandidatnyckel <code>{title, artist_name }</code>. <code>genre</code>, däremot, har <em>inte</em> ett fullt funktionellt beroende på kandidatnyckeln - samma kandidanyckel kan användas för att få tillbaks olika genres. Detta innebär att vår tabell inte ännu uppfyller 2NF.</p>
</div>
<div class="paragraph">
<p>Vi börjar med att ange ett nytt attribut (<code>id</code>) som primärnyckel:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<caption class="title">Table 17. songs-tabellen med ny primärnyckel</caption>
<colgroup>
<col style="width: 7.6923%;">
<col style="width: 15.3846%;">
<col style="width: 15.3846%;">
<col style="width: 23.0769%;">
<col style="width: 7.6923%;">
<col style="width: 7.6923%;">
<col style="width: 15.3846%;">
<col style="width: 7.6924%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="8"><p class="tableblock"><strong>songs</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>artist_name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>album</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>year</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>length</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>genre</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TiK ToK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kesha</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tik Tok</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tiktok.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alors on danse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DJ Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hits Dance Club</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alors.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alors on danse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DJ Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hits Dance Club</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alors.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hot N Cold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Katy Perry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hot N Cold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2008</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:43</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hotncold.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">My Hero</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myhero.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">My Hero</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myhero.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rock</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">everlong.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">everlong.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rock</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xandra</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xeverlong.mp3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Eftersom primärnycklar måste vara unika inom en tabell har vi ett problem: id 2, 4 samt 5 förekommer flera gånger i tabellen. Detta är inte tillåtet.</p>
</div>
<div class="paragraph">
<p>För att komma åt detta behöver vi bryta ut <code>genre</code> till en egen tabell, då det är <code>genre</code> som är orsaken till att ett samma id förekommer flera gånger i tabellen.</p>
</div>
<div class="paragraph">
<p>För att garantera att <code>genre</code>-tabellen uppnår 2NF ser vi samtidigt till att ge den en primärnyckel (<code>id</code>) (eftersom genre i vår modell inte har några andra attribut kopplade till sig behövs det inte egentligen en ny primärnyckel, men det är enklast att oftast göra likadant).</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 20%;">
<caption class="title">Table 18. genres-tabellen</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>genres</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>genre</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rock</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all" style="width: 65%;">
<caption class="title">Table 19. songs-tabellen utan genre</caption>
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 18.1818%;">
<col style="width: 27.2727%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 18.1818%;">
<col style="width: 9.091%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="7"><p class="tableblock"><strong>songs</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>artist_name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>album</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>year</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>length</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>path</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TiK ToK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kesha</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tik Tok</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tiktok.mp3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alors on danse</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DJ Team</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hits Dance Club</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">alors.mp3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hot N Cold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Katy Perry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hot N Cold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2008</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">03:43</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hotncold.mp3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">My Hero</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myhero.mp3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foo Fighters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Colour and the Shape</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1997</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">everlong.mp3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Xandra</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everlong</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04:00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">xeverlong.mp3</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Vi har nu ett nytt problem: Vi kan inte längre se vilken/vilka genres en låt tillhör.</p>
</div>
<div class="paragraph">
<p>I enligt med diskussionen om kurser i avsnittet om 1NF går det inte att lägga till några <code>genre</code>-attribut i <code>songs</code>-tabellen, och samma gäller eventuella <code>songs</code>-attribut i <code>genre</code>-tabellen. Eftersom vi i <code>genres</code>-tabellen har en primärnyckel med en ensam determinant får samma <code>genre</code> inte förekomma på flera rader.</p>
</div>
<div class="paragraph">
<p>Detta innebär att vi i detta fall behöver skapa en tredje-tabell:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 30%;">
<caption class="title">Table 20. genres-songs-tabellen</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>genres</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>song_id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>genre_id</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>genres-songs</code>-tabellen innehåller följande funktinonella beroenden: <code>{genre_id, song_id} &#8658; {genre_id, song_id}</code>. Även här skulle vi, om vi ville, kunna stoppa in en ny primärnyckel med endast en determinant, men i det här fallet behövs det inte (eftersom <code>genre-songs</code> är en relationstabell utan icke-nyckel-attribut).</p>
</div>
<div class="paragraph">
<p>Nu uppfyller samtliga 3 tabeller 2NF.</p>
</div>
<div class="sect5">
<h6 id="_övningsuppgift_2">Övningsuppgift</h6>
<div class="paragraph">
<p>Normalisera nedanstående tabell som hjälper ett bibliotek hålla koll på sina låneböcker så den uppfyller 2NF</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 25%;">
<col style="width: 8.3333%;">
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 8.3335%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="6"><p class="tableblock"><strong>books</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title_id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>isbn</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>loan_barcode</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>title</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>author</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>condition</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">978-91-27-14196-4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Hitchiker&#8217;s Guide to the Galaxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Douglas Adams</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Good</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">978-91-27-14196-4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000002</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Hitchiker&#8217;s Guide to the Galaxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Douglas Adams</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Good</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">978-91-27-14196-4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Hitchiker&#8217;s Guide to the Galaxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Douglas Adams</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Poor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">978-05-52-17189-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000004</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Good Omens</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Neil Gaiman</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Good</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">978-05-52-17189-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000004</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Good Omens</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terry Pratchett</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Good</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">978-05-52-17189-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Good Omens</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Neil Gaiman</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">978-05-52-17189-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Good Omens</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terry Pratchett</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mint</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_tredje_normalformen_3nf">Tredje Normalformen (3NF)</h5>
<div class="paragraph">
<p>Regler för Tredje Normalformen (3NF)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Alla regler för 2NF är uppfyllda</p>
</li>
<li>
<p>Inget icke-nyckel-attribut är transitivt beroende av primärnyckeln.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all" style="width: 75%;">
<caption class="title">Table 21. En tabell med transitionella beroenden</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 10%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="5"><p class="tableblock"><strong>employees</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>position</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_phone</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Johan Bengtsson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Johanneberg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origovägen 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">031-741 21 00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anna Persson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Johanneberg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origovägen 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">031-741 21 00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fatima Alzanbouri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Principal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Johanneberg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origovägen 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">031-741 21 00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inge Naning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Södertörn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Röntgenvägen 9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08-556 408 50</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minna Salo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Södertörn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Röntgenvägen 9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08-556 408 50</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Andrew Gao</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Principal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Södertörn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Röntgenvägen 9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08-556 408 50</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>De transitionella beroendena i tabellen ovan (<code>name &#8594; school_name</code> och <code>school_name &#8594; school_address</code>) innebär redundant data i tabellen.</p>
</div>
<div class="paragraph">
<p>Genom att bryta ut de transitionella beroendena (och därmed den redundanta datan) i egna tabeller kan vi uppnå 3NF:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 40%;">
<caption class="title">Table 22. En employees-tabell utan transitionella beroenden</caption>
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 14.2857%;">
<col style="width: 42.8572%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>employees</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>position</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_name</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Johan Bengtsson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Johanneberg</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anna Persson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Johanneberg</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fatima Alzanbouri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Principal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Johanneberg</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inge Naning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Södertörn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minna Salo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Södertörn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Andrew Gao</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Principal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Södertörn</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<caption class="title">Table 23. En schools-tabell utan transitionella beroenden</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>schools</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_phone</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Johanneberg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origovägen 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">031-741 21 00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Södertörn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Röntgenvägen 9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08-556 408 50</p></td>
</tr>
</tbody>
</table>
<div class="sect5">
<h6 id="_övningsuppgift_3">Övningsuppgift</h6>
<div class="paragraph">
<p>Vaktmästaren på en gymnasieskola behöver en databas för att hålla koll på elevernas skåp och nycklar.</p>
</div>
<div class="paragraph">
<p>Vaktmästaren berättar följande:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Varje skåp har ett skåpnummer.</p>
</li>
<li>
<p>Varje skåp står i en kolumn.</p>
</li>
<li>
<p>Varje skåp har en höjd (botten, mitten eller toppen).</p>
</li>
<li>
<p>En elev kan ha ett (men endast ett) skåp.</p>
</li>
<li>
<p>Det kan finnas tomma skåp.</p>
</li>
<li>
<p>Varje skåp har en låscylinder.</p>
</li>
<li>
<p>Det finns låscylindrar som inte sitter i ett skåp.</p>
</li>
<li>
<p>Varje låscylinder har en eller flera nycklar.</p>
</li>
<li>
<p>Varje nyckel har ett nyckelnummer.</p>
</li>
<li>
<p>Varje låscylinder tillhör en nummerserie.</p>
</li>
<li>
<p>Varje nummerserie har en huvudnyckel.</p>
</li>
<li>
<p>Skåpets nummer överensstämmer inte med låscylinderns nummer (och eleverna vet inte vad låscylindern har för nummer).</p>
</li>
<li>
<p>Om en elev slarvar bort nyckeln till sitt skåp behöver vaktmästaren byta cylindern mot en ledig cylinder med kvarvarande reservnycklar och den "nya" cylindern får inte tidigare suttit i samma skåp.</p>
</li>
<li>
<p>Vaktmästaren behöver hålla koll på borttappade nycklars nyckelnummer så hen vet vilken cylinder nyckeln tillhör om nyckeln skulle hittas senare.</p>
</li>
<li>
<p>Om samtliga nycklar till ett skåp slarvats bort behöver skåpets låscylinder bytas, och den gamla låscylindern markeras som förverkad (men om en nyckel till en förverkad cylinder senare hittas behöver man kunna ta bort förverkningsmarkeringen).</p>
</li>
<li>
<p>För att undvika att elever i samma klass har skåpen ovan/under varandra behöver vaktmästaren även veta elevens klass.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>För närvarande använder vaktmästaren ett excelark för att hålla koll på detta. Det ser ut som följer:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/02_relationsdatabaser/lockers.png" alt="lockers">
</div>
</div>
<div class="paragraph">
<p>Omvandla excelarket till en relationsdatabas där samtliga tabeller uppfyller 3NF.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_boyce_codd_normalform_bcnf">Boyce-Codd Normalform (BCNF)</h5>
<div class="paragraph">
<p>Regler för Boyce-Codd Normalform (BCNF)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Alla regler för 3NF är uppfyllda</p>
</li>
<li>
<p>Varje attribut i tabellen måste vara kopplat till nyckeln, hela nyckeln och inget annat.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<caption class="title">Table 24. En schools-tabell med ny primärnyckel</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 30%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>schools</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_address</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_phone</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Johanneberg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Origovägen 4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">031-741 21 00</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTI Södertörn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Röntgenvägen 9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">08-556 408 50</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all" style="width: 45%;">
<caption class="title">Table 25. En employees-tabell med två främmande nycklar</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 16.6666%;">
<col style="width: 16.6668%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="4"><p class="tableblock"><strong>employees</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>position_id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>school_id</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Johan Bengtsson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anna Persson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fatima Alzanbouri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inge Naning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minna Salo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Andrew Gao</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all" style="width: 20%;">
<caption class="title">Table 26. En positions-tabell</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>positions</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>name</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teacher</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Principal</p></td>
</tr>
</tbody>
</table>
<div class="sect5">
<h6 id="_övningsuppgift_4">Övningsuppgift</h6>
<div class="paragraph">
<p>Uppdatera elvskåpsdatabasen (om nödvändigt) så samtliga tabeller uppfyller BCNF.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_er_modellering">2.4. ER-Modellering</h3>
<div class="paragraph">
<p>När man bygger en applikation som kräver en databas, t.ex en applikation för att hålla koll på böcker, brukar man börja med att göra en beskrivning av hur problemdomänen fungerar.</p>
</div>
<div class="paragraph">
<p>Denna beskrivning på hög nivå kan kallas en konceptuell eller begreppsmässig beskrivning.
När man pratar om relationsdatabaser använder man ofta ordet <em>schema</em> för att beskriva denna konceptuella eller logiska modell av problemdomänen.</p>
</div>
<div class="paragraph">
<p>För att på ett smidigt sätt kunna <em>modellera</em>, det vill säga <em>designa</em> relationsdatabaser finns <em>Entity Relationship Diagrams</em> (ER-diagram).</p>
</div>
<div class="paragraph">
<p>ER-diagram illustrerar en databas logiska uppbyggnad, det vill säga vilka <em>entiteter</em>, <em>attribut</em> och <em>relationer</em> som finns i databasen - det beskriver inte den faktiska datan som lagras i databasen.</p>
</div>
<div class="paragraph">
<p>ER-diagram är en del av modelleringsspråket UML.</p>
</div>
<div class="sect3">
<h4 id="_entitet">2.4.1. Entitet</h4>
<div class="paragraph">
<p>En entitet (engelska: entity) representerar en en typ av sak som lagras i databasen. Entiteter ritas som rektanglar, med namnet (i singular) i mitten.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/02_relationsdatabaser/entities.png" alt="entities">
</div>
<div class="title">Två entiteter</div>
</div>
</div>
<div class="sect3">
<h4 id="_attribut_2">2.4.2. Attribut</h4>
<div class="paragraph">
<p>Attribut (engelska: attribute) representerar en egenskap på något som lagras i databasen. Attribut ritas som en ovaler, med namnet i mitten. Alla attribut måste tillhöra en tabell, och man drar ett streck mellan entiteten och attributet för att visa vilken entitet ett attribut tillhör.</p>
</div>
<div class="paragraph">
<p>Om ett attribut på en entitet är unikt för den entiteten, det vill säga, det får i systemet som databasen modellerar inte finnas två saker som har samma värde på det attributet stryker man under det attributet.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/02_relationsdatabaser/entities_with_attributes.png" alt="entities with attributes">
</div>
<div class="title">Två entiteter med attribut</div>
</div>
<div class="paragraph">
<p><code>Primärnycklarna</code> är alltid understrukna.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Främmande nycklar</strong></p>
</div>
<div class="paragraph">
<p>Främmande nycklar ska aldrig ritas ut i ER-diagrammet, deras placering framgår av relationerna (se nästa rubrik)</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_sambandstyp">2.4.3. Sambandstyp</h4>
<div class="paragraph">
<p>Sambandstyper (engelska: relation) visar på kopplingar mellan två entiteter. Sambandstyper ritas som romber. I mitten av romben står ett ett eller flera ord som beskriver entiteternas samband (oftast från ena entitetens perspektiv).</p>
</div>
<div class="paragraph">
<p>Varje sambandstyp är kopplad med streck till de ingående entiteterna.</p>
</div>
<div class="sect4">
<h5 id="_kardinalitetsförhållanden">Kardinalitetsförhållanden</h5>
<div class="paragraph">
<p>I varje ände av en sambandstyp framgår dess <em>kardinalitet</em> (engelska: cardinality), som mer exakt beskriver vad entiteterna har för <em>kardinalitetsförhållanden</em> eller samband.
Det finns tre typer av kardinalitetsförhållanden:</p>
</div>
<div class="sect5">
<h6 id="_ett_till_ett_samband_eller_11_samband">Ett-till-ett-samband (eller 1:1-samband)</h6>
<div class="paragraph">
<p>Ett 1:1-samband innebär att de ingående entiteterna kan höra ihop med <em>ett</em> exempel av entiteten i andra änden av sambandet.</p>
</div>
</div>
<div class="sect5">
<h6 id="_ett_till_många_samband_eller_1_samband">Ett-till-många-samband (eller 1:*-samband)</h6>
<div class="paragraph">
<p>Ett 1:*-samband innebär att de ingående entiteterna kan höra ihop med <em>ett</em> exempel av entiteten i andra änden av sambandet.</p>
</div>
<div class="paragraph">
<p>En sambandstyp där entiteten i den ena änden av sambandet kan höra ihop med flera exempel av entiten i den andra änden, men varje exempel i den andra änden hör bara ihop med ett exempel av den första entiteten.</p>
</div>
</div>
<div class="sect5">
<h6 id="_många_till_många_samband_eller_samband">Många-till-Många-samband (eller *:*-samband)</h6>
<div class="paragraph">
<p>Ett *:*-samband innebär att ett exempel av var och en av de ingående entiteterna kan höra ihop med flera exempel av de övriga ingående entiteterna.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/02_relationsdatabaser/entities_with_attributes_and_relations.png" alt="entities with attributes and relations">
</div>
<div class="title">Två entiteter med attribut och sambandstyp</div>
</div>
<div class="paragraph">
<p>I exemplet ovan kan man utläsa att <strong>en</strong> författare kan skriva <strong>många</strong> (men minst 1) böcker,
men en bok kan bara ha en författare. Det är med andra ord en en-till-många-samband.</p>
</div>
<div class="paragraph">
<p>Sambandstypen är i exemplet ovan är namngiven från författarens perspektiv ("wrote"), men skulle lika gärna kunna vara skriven från en boks perspektiv (t.ex "written by" eller "belongs to".</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_övningar">2.4.4. Övningar</h4>
<div class="sect4">
<h5 id="_datorregister">Datorregister</h5>
<div class="paragraph">
<p>Alla elever på NTI Johanneberg får låna en dator. Det finns ett inventeringssystem med en databas där alla elever, datorer och lån finns registrerade.</p>
</div>
<div class="paragraph">
<p>Systemet håller koll på:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Datorers modell och serienummer</p>
</li>
<li>
<p>Elevers namn och personnummer</p>
</li>
<li>
<p>Vilken elev som har lånat vilken dator</p>
</li>
<li>
<p>Samtliga serviceärenden för en specifik dator, och vem datorn tillhörde när serviceärendet startades.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rita upp de entiteter, attribut och sambandstyper som databasen behöver.</p>
</div>
</div>
<div class="sect4">
<h5 id="_matkort">Matkort</h5>
<div class="paragraph">
<p>I årskurs tre får eleverna på NTI-Johanneberg matkort. Företaget som skapar och säljer matkorten till skolorna har (förhoppningsvis) en databas som håller koll på skolor, kort, och låntagare.</p>
</div>
<div class="paragraph">
<p>De behöver kunna hålla kolla på:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Skolors adress och kontaktperson (så de kan skicka ut korten till rätt adress).</p>
</li>
<li>
<p>Korts serienummer och pinkod</p>
</li>
<li>
<p>Elevers namn och klass</p>
</li>
<li>
<p>Vilket kort som tillhör vilken elev</p>
</li>
<li>
<p>Vilken skola och klass en elev går i</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rita upp de entiteter, attribut och sambandstyper som databasen behöver.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_transaktioner">2.5. Transaktioner</h3>
<div class="paragraph">
<p>I en databas kan ofta många transaktioner vara beroende av varandra.</p>
</div>
<div class="paragraph">
<p>Säg till exempel att du skriver mjukvara för att hålla koll på bankkonton, och du vill föra över pengar från ett konto till ett annat konto.
Då måste du:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ta bort pengarna från konto 1.</p>
</li>
<li>
<p>Föra in pengerna på konto 2.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Alternativt</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Föra in pengarna på konto 2.</p>
</li>
<li>
<p>Ta bort pengarna från konto 1.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Säg att något går fel i steg 2 - kanske har någon angett ett felaktigt kontonummer, eller under tiden som instruktionerna utförs har konto 2 tagits bort.
I ett system utan transaktionssäkerhet skulle pengarna bara ha försvunnit i tomma intet (eller i alternativ 2, skapats från tomma intet)</p>
</div>
<div class="paragraph">
<p>I de flesta databashanterare finns därför <em>transaktioner</em> - om man lägger sina instruktioner i en transaktion kontrollerar databasen att samtliga instruktioner i transaktionen faktiskt genomförs.
Skulle felet i steg 2 hända i en transaktion kan man göra en så-kallad <em>rollback</em>, och därmed skulle inget av stegen i transaktionen utföras - och pengarna skulle finnas kvar.</p>
</div>
<div class="sect3">
<h4 id="_acid">2.5.1. ACID</h4>
<div class="sect4">
<h5 id="_atomicity">Atomicity</h5>
<div class="paragraph">
<p>Atomicitet (engelska: atomicity) innebär att en transaktion antingen genomförs i sin helhet (samtliga steg) eller så genomförs den inte alls. Om en transaktion avbruts innan alla steg genomförts ska databashanteraren kunna garantera att databasen är i samma state som innan transaktionen påbörjades.</p>
</div>
</div>
<div class="sect4">
<h5 id="_consistency">Consistency</h5>
<div class="paragraph">
<p>"Consistency" är ett ord som saknar en tydlig svensk motsvarighet</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>(consistency)* – om databaser: det att all information i databasen är sam­stäm­mig och mot­sägelse­fri. Det får inte finnas några upp­gifter i databasen som inte går ihop med var­andra. – I trans­aktions­hantering brukar kon­si­stens formuleras som att data­basen ska ha ett tillåtet till­stånd både vid början och vid slutet av en tran­saktion. Consistency är c:et i för­kort­ning­en ACID. – Se också referens­integritet och lång­sam konsistens (even­tu­al con­sis­tency).  – Ordet: Som över­sättning av engelska consistency är konsistens omstritt, eftersom det svenska ordet konsistens oftast står för hur trög­flytande eller lätt­flytande något är. Men på svenska har ordet också, när det gäller logiska resonemang, samma betydelse som engelska consistency, alltså att resonemanget är logiskt och konsekvent. (Inkonsistent är ett etablerat svenskt ord, och det används inte om mat.) Skillnaden mellan konsekvens och konsistens kan sägas vara att konsekvens är att göra lika­dant varje gång, medan konsistens är när alla delar av en helhet stämmer över­ens med var­andra.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; https://it-ord.idg.se/ord/konsistens/
</div>
</div>
<div class="paragraph">
<p>Consistency garanterar att databasen alltid kommer vara "konsistent", dvs att en transaktion enbart kommer genomföras om databasen, efter transaktionen är genomförd, kommer vara i ett giltigt tillstånd. Man kan på svenska prata om "datavalidering" &amp; "referensintegritet".</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Data integrity is a fundamental component of information security. In its broadest use, “data integrity” refers to the accuracy and consistency of data stored in a database, data warehouse, data mart or other construct. The term – Data Integrity - can be used to describe a state, a process or a function – and is often used as a proxy for “data quality”. Data with “integrity” is said to have a complete or whole structure. Data values are standardized according to a data model and/or data type. All characteristics of the data must be correct – including business rules, relations, dates, definitions and lineage – for data to be complete. Data integrity is imposed within a database when it is designed and is authenticated through the ongoing use of error checking and validation routines. As a simple example, to maintain data integrity numeric columns/cells should not accept alphabetic data.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; https://www.veracode.com/blog/2012/05/what-is-data-integrity
</div>
</div>
<div class="paragraph">
<p>I de flesta databashanterare kan man skriva regler för hur rader och kolumner i tabeller ska se ut.</p>
</div>
<div class="paragraph">
<p>T.ex kan man bestämma att alla rader i användartabellen måste innehålla ett användarnamn, och att varje användarnamn måste vara unikt.
Databashanteraren gör det i så fall omöjligt att skapa rader i användatabellen som saknar användarnamn, eller där användarnamnet redan finns på någon annan rad i tabellen</p>
</div>
<div class="paragraph">
<p>I de flesta databashanterare kan man även skriva regler för hur tabeller hör ihop. Detta gör det möjligt att garantera att kopplingarna mellan tabellerna stämmer, och att datan uppdateras på ett korrekt sätt.</p>
</div>
<div class="paragraph">
<p>Till exempel kan man se till att en användares alla meddelanden tas bort när användaren tas bort, eller att man enbart kan lägga till elever i klasser som faktiskt finns.</p>
</div>
</div>
<div class="sect4">
<h5 id="_isolation">Isolation</h5>
<div class="paragraph">
<p>Isolation garanterar att även om transaktioner utförs parallellt kommer databasen hamna i samma state som om transaktionerna utförts sekventiellt. Detta innebär att en transaktion aldrig får se den "tillfälliga data" som skapas medans en annan transaktion utförs (innan transaktionen är klar).</p>
</div>
</div>
<div class="sect4">
<h5 id="_durability">Durability</h5>
<div class="paragraph">
<p>Durability innebär att när en transaktion är genomförd kommer all data finnas sparad och är korrekt även om databaservern kraschar (vid t.ex ett strömavbrott). Skulle databashanteraren krascha mitt i en transaktion kommer datan återställas till läget innan kraschen.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rollback">2.5.2. Rollback</h4>
<div class="paragraph">
<p>När en transaktion ska utföras görs det en "Commit" på transaktionen. Databashanteraren ser nu till att alla steg i transaktionen faktiskt genomförs. Skulle transaktionen av någon anledning inte genomföras till fullo genomför databashanteraren en "rollback", det vill säga ser till att databasen är i samma state som innan transaktionen påbörjades.</p>
</div>
<div class="paragraph">
<p>Transaktioner kan avbrytas av bland annat följande skäl:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Transaktionen skulle innebära att databasen skulle hamna i ett felaktigt state.</p>
</li>
<li>
<p>Databashanteraren kraschar mitt under transaktionen. I de flesta databashanterare finns en loggfil databashanteraren kan använda för att vid återstart se till att databasen är i rätt state.</p>
</li>
<li>
<p>Användaren avbryter transaktionen</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_backup_och_snapshots">2.5.3. Backup och Snapshots</h4>
<div class="paragraph">
<p>De flesta databashanterare har inbyggd funktionalitet för att ta säkerhetskopior på databasen. I de flesta fall förvaras dessa backups på en annan dator och-   gärna i en annan serverhall.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_indexering">2.6. Indexering</h3>
<div class="sect3">
<h4 id="_varför_indexering">2.6.1. Varför Indexering</h4>
<div class="paragraph">
<p>När mängden i en databas växer försämras prestandan vid sökningar i databasen. Detta beror helt enkelt på att det finns fler rader databashanteraren måste söka igenom för att hitta den eller de rader som stämmer in på SQL-frågan.</p>
</div>
<div class="paragraph">
<p>Följande exempel med linjär/binärsökning är inte helt sann, men kan användas som en mental modell för att förstå varför och hur index fungerar.</p>
</div>
<div class="paragraph">
<p>Man kan tänka sig att databashanteraren gör en linjär sökning genom tabellen. En linjär sökning har kostnaden O(n). Detta innebär att om 10 000 rader skulle ta en tiondels sekund att söka igenom skulle 100 000 rader ta en sekund att söka igenom.</p>
</div>
<div class="paragraph">
<p>För att snabba upp genomsökningen av en tabell behövs en annan algoritm än en linjär sökning. En enkel men väldigt effektiv algoritm är binärsökning (med kostnaden 0(log(n))). Men för att binärsökningsalgoritmen ska fungera måste datan vara sorterad. Och en tabell i en databas kan bara vara sorterad på ett sätt. Eller?</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 30%;">
<caption class="title">Table 27. En employees-tabell sorterad efter en autoinkrementerande primärnyckel</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 42.8571%;">
<col style="width: 42.8572%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>employees</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>first_name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>last_name</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Johan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bengtsson</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anna</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Persson</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fatima</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alzanbouri</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Naning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minna</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Salo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Andrew</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gao</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Tabellen ovan är definerad med <code>id</code> som en autoinkrementerande primärnyckel (postgres: serial). Detta innebär att tabellen redan är indexerad efter <code>id</code>. Frågor som använder id:t för att söka efter en specifik användare kan därmed använda sig av binärsökningsalgoritmen för att snabbt hitta användaren.</p>
</div>
<div class="listingblock">
<div class="title">Exempelfrågor</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">employees</span> <span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">4</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">employees</span> <span class="k">WHERE</span> <span class="n">last_name</span> <span class="o">=</span> <span class="s1">'Naning'</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Denna fråga använder <code>id</code> vid sökningen och kan använda en mer effektiv algoritm</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Denna fråga använder <code>last_name</code> vid sökningen och måste använda en linjär sökning</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Så länge tabellen är liten och/eller vi primärt använder <code>id</code> vid våra sökningar i <code>employees</code>-tabellen är det inga problem. Men om tabellen växer väldigt mycket och om många sökningar görs på t.ex. efternamn kan vi behöva tänka om och införa ytterligare index.</p>
</div>
<div class="paragraph">
<p>Index skapas med hjälp av sql-kommandot <code>CREATE INDEX</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">employee_lastname</span> <span class="k">ON</span> <span class="n">employees</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>employee_lastname är namnet du döper indexet till - det kan heta vadsomhelst.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Man kan tänka att det, när man skapar ett index, skapas en ny tabell enligt nedan:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 20%;">
<caption class="title">Table 28. En indexeringstabell för employee_lastname</caption>
<colgroup>
<col style="width: 75%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>employee_lastname</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>last_name</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>employee_id</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alzanbouri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bengtsson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gao</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Naning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Persson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Salo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Observera att tabellen ovan är sorterad efter efternamn, och innehåller en främmande nyckel som låter oss hämta användaren. Eftersom tabellen är sorterad kan vi nu mer effektivt söka på efternamn.</p>
</div>
<div class="listingblock">
<div class="title">Exempelfrågor</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">employees</span> <span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">4</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">employees</span> <span class="k">WHERE</span> <span class="n">last_name</span> <span class="o">=</span> <span class="s1">'Naning'</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Denna fråga använder <code>id</code> vid sökningen och kan använda en effektiv algoritm</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Eftersom vi nu skapat ett index för last_name, kommer även denna fråga använda en effektiv algoritm</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_nackdelar">2.6.2. Nackdelar</h4>
<div class="paragraph">
<p>Nackdelar med att ha index är att vid varje ny användare vi lägger till måste vi indexera om indexeringstabellerna:</p>
</div>
<div class="listingblock">
<div class="title">Lägga till en ny användare</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">employees</span> <span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">'Kim'</span><span class="p">,</span> <span class="s1">'Ekblad'</span><span class="p">)</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Detta får till följd att <code>employees_lastname</code>-indextabellen måste byggas om.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Att bygga om en indexeringstabell är en relativt kostsam operation Det gör att det går långsammare att lägga till rader i en tabell med index. För att veta om det är värt att lägga till ett index bör man samla in statistik kring hur ofta det man vill indexera används vid sökningar, och hur ofta indexeringstabellerna behöver uppdateras.</p>
</div>
<div class="paragraph">
<p>Observera slutligen att exemplet här enbart är en liknelse för vad som faktiskt händer - olika databashanterare kan skapa index på olika sätt, ofta används så-kallade <a href="https://www.youtube.com/watch?v=NI9wYuVIYcA">b-trees</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stored_procedures">2.7. Stored Procedures</h3>
<div class="paragraph">
<p>En lagrad procedur (engelska: stored procedure) är kod (oftast i form av funktioner) som kan lagras i databashanteraren, och sedan anropas ock köras.
Vilket språk funktionen skrivs i beror på databashanteraren - en del har en SQL-liknande syntax, men andra använder sig av Java eller C.</p>
</div>
<div class="sect3">
<h4 id="_fördelar">2.7.1. Fördelar</h4>
<div class="sect4">
<h5 id="_kompilering_och_optimering">Kompilering och optimering</h5>
<div class="paragraph">
<p>Eftersom stored procedures lagras direkt i databashanteraren behöver inte databashanteraren tolka den inkommande SQL-strängen, utan kan kompilera och optimera funktionen när den skapas.</p>
</div>
</div>
<div class="sect4">
<h5 id="_minskad_nätverkstrafik">Minskad nätverkstrafik</h5>
<div class="paragraph">
<p>Även mängden data som behöver skickas över nätverket till databashanteraren kan minska - istället för att skicka hela sql-strängen behöver man enbart anropa funktionen (och om funktionen tar några parametrar, skicka med dessa).</p>
</div>
<div class="paragraph">
<p>Ofta konfigureras stored procedures för att automagiskt köra efter en annan fråga körts - i dessa fall undviks helt den nätverkstrafik som annars skulle krävts för att funktionen skulle köras. Ett exempel är när man vill uppdatera en tabell beroende på vad som händer i en annan tabell.</p>
</div>
</div>
<div class="sect4">
<h5 id="_affärslogik_i_databasen">Affärslogik i databasen</h5>
<div class="paragraph">
<p>Stored procedures gör det möjligt att lägga in mycket av den funktionalitet som annars skulle legat i en klient/webbserver direkt i databashanteraren. Detta skulle minska risken för buggar från klient/webbserver skulle påverka databasens innehåll.</p>
</div>
</div>
<div class="sect4">
<h5 id="_rättigheter">Rättigheter</h5>
<div class="paragraph">
<p>En stored procedure kan köras med andra rättigheter än den som anropar proceduren. Om en användare i vanliga fall inte har rättigheter att göra en <code>DELETE</code> kan möjligheten fortfarande finnas att göra det med en stored procedure, som någon (förhoppningsvis) kontrollerat att den inte gör något oönskvärt.</p>
</div>
</div>
<div class="sect4">
<h5 id="_skydd_från_sql_injektion">Skydd från SQL-injektion</h5>
<div class="paragraph">
<p>Om databashanteraren använder stored procedures spelar det ingen roll hur mycket elak SQL en eventuell anfallare försöker skicka - det enda som kommer till databasen är funktionsanrop.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_nackdelar_2">2.7.2. Nackdelar</h4>
<div class="sect4">
<h5 id="_affärslogik_i_databasen_2">Affärslogik i databasen</h5>
<div class="paragraph">
<p>Det kan vara svårt att veta var i applikationen logik finns om en del av logiken ligger i databashanteraren.</p>
</div>
</div>
<div class="sect4">
<h5 id="_fastlåsning_i_databashanteringssystem">Fastlåsning i databashanteringssystem</h5>
<div class="paragraph">
<p>De flesta databashanterare har olika, inkompatibla språk och ramverk att för stored procedures.</p>
</div>
</div>
<div class="sect4">
<h5 id="_specialistkompetens_krävs">Specialistkompetens krävs</h5>
<div class="paragraph">
<p>Den som skriver stored procedures behöver specialistkompetens, då de inbegriper nya språk och tankesätt.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_nosql_datagbaser">3. NoSQL-datagbaser</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_fördelar_med_nosql_databashanterare">3.1. Fördelar med NoSQL-databashanterare</h3>
<div class="sect3">
<h4 id="_big_data_2">3.1.1. Big Data</h4>
<div class="paragraph">
<p>Om din domän innebär att du kommer hantera stora (riktigt stora) mängder data (så-kallad "Big Data") kan en NoSQL-databashanterare se till att prestandan inte blir lidande (på bekostnad av ACID-garantier).</p>
</div>
</div>
<div class="sect3">
<h4 id="_schemaless">3.1.2. Schemaless</h4>
<div class="paragraph">
<p>Relationsdatabaser är baserade på rigida regler kring hur datan ska vara strukturerad. En NoSQL-databashanterare låter dig utan problem ändra prå strukturer och lagra olika typer av data tillsammans.</p>
</div>
<div class="paragraph">
<p>Detta innebär även att det kan gå snabbare att komma igång med en No-SQL-databashanterare, då man snabbt och enkelt kan ändra på strukturen på data som lagras i databasen.</p>
</div>
</div>
<div class="sect3">
<h4 id="_scaling">3.1.3. Scaling</h4>
<div class="paragraph">
<p>NO-SQL-databashanterare är designade från grunden för att vara lätt att dela upp på olika servrar.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nackdelar_med_nosql_databaser">3.2. Nackdelar med NoSQL-databaser</h3>
<div class="sect3">
<h4 id="_avsaknad_av_acid">3.2.1. Avsaknad av ACID</h4>
<div class="paragraph">
<p>De flesta No-SQL-databashanterare kan inte på samma sätt som en relationsdatabas garantera ACID. Istället brukar man tala om <a href="https://en.wikipedia.org/wiki/Eventual_consistency">Eventual Consistency</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_avsaknad_av_mogenhet">3.2.2. Avsaknad av mogenhet</h4>
<div class="paragraph">
<p>No-SQL-databashanterare har inte årtionden av forskning och beprövad erfarenhet bakom sig. Detta innebär att det kan vara svårt att hitta korrekt, vetenskapligt bekräftad information.</p>
</div>
</div>
<div class="sect3">
<h4 id="_avsaknad_av_verktyg">3.2.3. Avsaknad av verktyg</h4>
<div class="paragraph">
<p>Eftersom No-SQL-databashanterare är såpass nya, och, i många fall baserade på olika teorier, saknas ofta t.ex. analys/prestanda/eller andra rapporteringsverktyg.-</p>
</div>
</div>
<div class="sect3">
<h4 id="_avsaknad_av_en_gemensam_standard">3.2.4. Avsaknad av en gemensam standard</h4>
<div class="paragraph">
<p>Det finns många olika No-SQL-databashanterare, och de fungerar på olika sätt; Det finns ingen gemensam standard som det finns för relationsdatabaser. Detta kan göra det väldigt kostsamt och krångligt att byta från en No-SQL-databashanterare till en annan.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-04-26 12:28:46 UTC
</div>
</div>
</body>
</html>